<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Dashboard | DMS</title>
	<script src="/static/js/tailwind.js"></script>
	<link href="https://unpkg.com/gridjs/dist/theme/mermaid.min.css" rel="stylesheet" />
	<style>
		::-webkit-scrollbar {
			width: 8px;
		}
		::-webkit-scrollbar-track {
			background: #f1f1f1;
		}
		::-webkit-scrollbar-thumb {
			background: #888;
		}
		::-webkit-scrollbar-thumb:hover {
			background: #555;
		}
		input.gridjs-input{
			/* box-shadow: 0 0 0 1px #141414; */
		}
		input.gridjs-input:focus {
			border-color: #615FFF;
			box-shadow: 0 0 0 3px #615FFF80;
		}
		.gridjs-search-input{
			width: 100%;
		}
	</style>
</head>

<body>
	<section class="flex min-h-screen bg-indigo-50">
		<!-- Mobile Menu Button -->
		<button id="mobile-menu-btn-ins" class="lg:hidden fixed top-4 left-4 z-50 bg-[#141414] text-white p-3 rounded-lg shadow-lg">
			<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
				<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
			</svg>
		</button>

		<!-- Overlay for mobile -->
		<div id="mobile-overlay-ins" class="lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 hidden"></div>

          <div id="sidebar-ins" class="fixed top-0 left-0 flex flex-col bg-clip-border bg-[#141414] text-white h-screen w-[18rem] p-4 shadow-xl shadow-blue-gray-900/5 z-50 transform -translate-x-full lg:translate-x-0 transition-transform duration-300 ease-in-out">
               <div class="mb-2 p-4 flex items-center justify-between">
                    <img src="../static/images/IDEA-LOGO.png" class="w-[110px] h-[70px] object-contain" alt="logo">
					<!-- Close button for mobile -->
					<button id="close-menu-btn-ins" class="lg:hidden text-white">
						<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
						</svg>
					</button>
               </div>
               <nav class="flex flex-col justify-between p-2 font-sans text-base font-normal text-white h-full">
                    <div class="flex flex-col gap-1">
                         <a href="/instructor/">
                              <div role="button" tabindex="0" class="flex items-center w-full p-3 rounded-lg text-start leading-tight transition-all hover:bg-indigo-500 hover:bg-opacity-80 hover:text-white outline-none cursor-pointer">
                                   <div class="grid place-items-center mr-4">
                                        <svg fill="currentColor" class="w-5 h-5" viewBox="0 0 24 24">
                                             <rect x="2" y="2" width="9" height="11" rx="2"></rect>
                                             <rect x="13" y="2" width="9" height="7" rx="2"></rect>
                                             <rect x="2" y="15" width="9" height="7" rx="2"></rect>
                                             <rect x="13" y="11" width="9" height="11" rx="2"></rect>
                                        </svg>
                                   </div>
                                   Dashboard
                              </div>
                         </a>
                    </div>
                    <div class="flex flex-col gap-1">
                         {% if user.is_authenticated %}
                         <div role="button" tabindex="0" class="flex items-center w-full p-3 rounded-lg text-start leading-tight transition-all hover:bg-indigo-500 hover:bg-opacity-80 hover:text-white outline-none cursor-pointer">
                              <div class="grid place-items-center mr-4">
                                   {% if profilepic != '' %}
                                   <img src="{{ profilepic }}" class="w-5 h-5 rounded-full" alt="Profile Picture">
                                   {% else %}
                                   <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-circle" viewBox="0 0 16 16">
                                        <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0"/>
                                        <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1"/>
                                   </svg>
                                   {%endif%}
                              </div>
                              {{ user.username }}
                         </div>
                         <a href="/signout/">
                              <div role="button" tabindex="0" class="flex items-center w-full p-3 rounded-lg text-start leading-tight transition-all hover:bg-indigo-500 hover:bg-opacity-80 hover:text-white outline-none cursor-pointer">
                                   <div class="grid place-items-center mr-4">
                                        <svg fill="currentColor" class="w-5 h-5" viewBox="0 0 16 16">
                                             <path d="M7.5 1v7h1V1z"/>
                                             <path d="M3 8.812a5 5 0 0 1 2.578-4.375l-.485-.874A6 6 0 1 0 11 3.616l-.501.865A5 5 0 1 1 3 8.812"/>
                                        </svg>
                                   </div>
                                   Logout
                              </div>
                         </a>
                         {% endif %}
                    </div>
               </nav>
          </div>
		<div class="p-4 sm:p-6 lg:p-8 w-full lg:w-[calc(100vw-18rem)] lg:ml-[18rem] mt-16 lg:mt-0">
			<div class="w-full flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 sm:gap-0">
				<h1 class="text-2xl sm:text-3xl font-bold">Dashboard</h1>
				<div class="relative">
					<div id="notificationBtn"
						class="bg-white p-3 rounded-full shadow cursor-pointer flex items-center justify-center">
						<svg viewBox="0 0 24 24" fill="none" class="w-6 h-6 text-indigo-400">
							<path d="M6.502 6.975a5.525 5.525 0 0 1 10.995 0l.287 2.866c.018.175.026.262.037.348a8 8 0 0 0 1.19 3.325l.192.291.861 1.292c.787 1.18 1.18 1.769 1.008 2.244-.033.09-.078.175-.135.252-.3.407-1.009.407-2.426.407H5.489c-1.417 0-2.126 0-2.426-.407a1 1 0 0 1-.134-.252c-.173-.475.22-1.065 1.006-2.244l.862-1.292.192-.291a8 8 0 0 0 1.19-3.325c.01-.086.02-.173.037-.348l.286-2.866Z"
								fill="currentColor"></path>
							<path d="M10.068 20.63c.114.106.365.2.715.267.349.067.777.103 1.217.103.44 0 .868-.036 1.217-.103.35-.067.6-.161.715-.268"
								stroke="currentColor" stroke-width="2" stroke-linecap="round"></path>
						</svg>
					</div>
					<div id="notificationModal"
						class="w-[calc(100vw-2rem)] sm:w-full sm:min-w-[450px] sm:max-w-[450px] absolute top-14 right-0 scale-y-0 opacity-0 origin-top bg-white rounded-lg shadowCustom overflow-hidden transition-all duration-300">
						<div
							class="flex items-start gap-2 text-sm text-indigo-700 px-4 border-[#141414] last-of-type:border-none cursor-pointer hover:bg-indigo-50 transition-all duration-300 scale-100 py-2 border-b">
							<p>10 students registered</p>
						</div>
						<div
							class="flex items-start gap-2 text-sm text-indigo-700 px-4 border-[#141414] last-of-type:border-none cursor-pointer hover:bg-indigo-50 transition-all duration-300 scale-100 py-2 border-b">
							<p>10 students registered</p>
						</div>
					</div>
				</div>
			</div>
			<div class="my-5 flex flex-col gap-5 bg-white p-5 rounded-xl shadow-[3px_8px_20px_-10px_#00000015]">
				<div>
					<p class="text-3xl font-semibold">Students</p>
				</div>
				<div id="student-table" class="w-full"></div>
			</div>
			<div class="my-5 flex flex-col gap-5 bg-white p-5 rounded-xl shadow-[3px_8px_20px_-10px_#00000015]">
				<div>
					<p class="text-3xl font-semibold">Payments Remaining</p>
				</div>
				<div id="payment-table" class="w-full"></div>
			</div>
			<!-- <div class="my-5 flex flex-col gap-5 bg-white p-5 rounded-xl shadow-[3px_8px_20px_-10px_#00000015]">
				<div class="flex items-center justify-between">
					<p class="text-3xl font-semibold">Complains</p>
				</div>
				<div id="complain-table" class="w-full"></div>
			</div> -->
			<!-- <div class="w-full grid grid-cols-1 lg:grid-cols-4 lg:grid-rows-3 gap-3 mt-10">
				<div
					class="bg-indigo-500 h-40 rounded-xl col-span-2 lg:col-span-1 flex flex-col items-center justify-center gap-3 shadow-[3px_8px_20px_-10px_#00000015]">
					<p class="text-white text-sm font-semibold">Sales: Aug 2027</p>
					<p class="text-white font-bold text-2xl">$5.73K</p>
					<p class="text-white text-xs ">Jul 2027: $10.35K</p>
				</div>
				<div
					class="bg-indigo-500 h-40 rounded-xl col-span-2 lg:col-span-1 flex flex-col items-center justify-center gap-3 shadow-[3px_8px_20px_-10px_#00000015]">
					<p class="text-white text-sm font-semibold">Average Order Value : Aug 2027</p>
					<p class="text-white font-bold text-2xl">$34</p>
					<p class="text-white text-xs ">Jul 2027: $0.23K</p>
				</div>
				<div
					class="bg-white h-full rounded-xl col-span-2 row-span-2 flex flex-col items-center justify-center gap-3 shadow-[3px_8px_20px_-10px_#00000015] p-3">
					<p class="text-indigo-500 text-sm font-semibold">Attendance</p>
					<canvas id="myChart"></canvas>
				</div>
				<div
					class="bg-white h-full rounded-xl col-span-2 row-span-2 shadow-[3px_8px_20px_-10px_#00000015] p-6">
					<div class="flex items-center justify-between">
						<p class="text-sm text-indigo-800 font-bold">Staging Orders</p>
					</div>
					<div class="grid grid-cols-3 gap-4 mt-8">
						<div
							class="w-full h-28 bg-indigo-50 rounded-lg shadow-inner flex flex-col items-center justify-center">
							<p class="text-2xl text-indigo-900 font-bold">18</p>
							<p class="text-xs text-indigo-900 font-bold mt-3">Payment</p>
						</div>
						<div
							class="w-full h-28 bg-indigo-50 rounded-lg shadow-inner flex flex-col items-center justify-center">
							<p class="text-2xl text-indigo-900 font-bold">12</p>
							<p class="text-xs text-indigo-900 font-bold mt-3">In work</p>
						</div>
						<div
							class="w-full h-28 bg-indigo-50 rounded-lg shadow-inner flex flex-col items-center justify-center">
							<p class="text-2xl text-indigo-900 font-bold">32</p>
							<p class="text-xs text-indigo-900 font-bold mt-3">Delivery</p>
						</div>
						<div
							class="w-full h-28 bg-indigo-50 rounded-lg shadow-inner flex flex-col items-center justify-center">
							<p class="text-2xl text-indigo-900 font-bold">32</p>
							<p class="text-xs text-indigo-900 font-bold mt-3">Delivered</p>
						</div>
						<div
							class="w-full h-28 bg-indigo-50 rounded-lg shadow-inner flex flex-col items-center justify-center">
							<p class="text-2xl text-indigo-900 font-bold">4</p>
							<p class="text-xs text-indigo-900 font-bold mt-3">Failed</p>
						</div>
						<div
							class="w-full h-28 bg-indigo-50 rounded-lg shadow-inner flex flex-col items-center justify-center">
							<p class="text-2xl text-indigo-900 font-bold">11</p>
							<p class="text-xs text-indigo-900 font-bold mt-3">Return</p>
						</div>
					</div>
				</div>
				<div
					class="bg-indigo-500 h-40 rounded-xl col-span-2 lg:col-span-1 flex flex-col items-center justify-center gap-3 shadow-[3px_8px_20px_-10px_#00000015]">
					<p class="text-white text-sm font-semibold">Total Profit: Aug 2027</p>
					<p class="text-white font-bold text-2xl">$1.2K</p>
					<p class="text-white text-xs ">Jul 2027: $0.8K</p>
				</div>
				<div
					class="bg-indigo-500 h-40 rounded-xl col-span-2 lg:col-span-1 flex flex-col items-center justify-center gap-3 shadow-[3px_8px_20px_-10px_#00000015]">
					<p class="text-white text-sm font-semibold">Cutomers: Aug 2027</p>
					<p class="text-white font-bold text-2xl">144</p>
					<p class="text-white text-xs ">Jul 2027: 121</p>
				</div>
			</div> -->
		</div>
		<section class="fixed top-0 left-0 w-full h-full bg-black/80 flex justify-center items-center scale-0 opacity-0 z-50 transition-all duration-300 p-4" id="add-attendance-modal">
			<div class="bg-white p-4 sm:p-6 lg:p-8 rounded-lg w-full sm:w-[90%] md:w-[80%] lg:w-[70%] xl:w-1/2 flex flex-col gap-4 sm:gap-6 max-h-[90vh] overflow-y-auto">
				<div class="flex justify-between items-center">
					<h1 id="attendance-model-heading" class="text-3xl font-bold">Take Attendance</h1>
					<div class="bg-[#141414] flex items-center justify-center p-2 text-white rounded-full cursor-pointer" id="close-attendance-modal">
						<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
							<path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z"/>
						</svg>
					</div>
				</div>
				<form action="" method="POST" class="w-full flex flex-col gap-6 max-h-[500px] overflow-y-auto pr-2" enctype="multipart/form-data" id="add-attendance-form">
					{%csrf_token%}
					<div class="w-full">
						<div class="mb-4 flex flex-col sm:flex-row items-stretch gap-4 w-full">
							<div class="flex flex-col gap-2 w-full sm:w-1/2">
                                             <label for="studentName" class="block font-semibold">Student</label>
                                             <input type="text" name="studentName" id="studentName" autocomplete="off" required class="block w-full rounded-lg bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
                                        </div>
                                        <div class="flex flex-col gap-2 w-full sm:w-1/2">
                                             <label for="attendanceDate" class="block font-semibold">Date</label>
                                             <input type="date" name="attendanceDate" id="attendanceDate" autocomplete="off" required class="block w-full rounded-lg bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
                                        </div>
						</div>
						<div class="mb-4 flex flex-col sm:flex-row items-stretch gap-4 w-full">
							<div class="flex flex-col gap-2 w-full sm:w-1/3">
								<label for="inTime" class="block font-semibold">In Time</label>
								<input type="time" name="inTime" id="inTime" autocomplete="off" pattern="[0-9]{10}" required class="block w-full rounded-lg bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
							</div>
							<div class="flex flex-col gap-2 w-full sm:w-1/3">
								<label for="outTime" class="block font-semibold">Out Time</label>
								<input type="time" name="outTime" id="outTime" autocomplete="off" required class="block w-full rounded-lg bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
							</div>
                                   <div class="flex flex-col gap-2 w-1/3">
								<label for="attendanceStatus" class="block font-semibold">Status</label>
								<select name="attendanceStatus" id="attendanceStatus" class="block w-full rounded-lg bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6" required>
									<option disabled selected>Select Status</option>
									<option value="Present">Present</option>
									<option value="Absent">Absent</option>
									<option value="Leave">Leave</option>
								</select>
							</div>
						</div>
					</div>
					<div id="btns-container" class="flex justify-end">
						<button id="add-attendance-btn" class="bg-indigo-600 text-white px-6 py-2 rounded cursor-pointer mr-2">
							<p>Add</p>
						</button>
						<botton id="close-add-attendance-modal" class="bg-red-700 text-white px-4 py-2 rounded cursor-pointer">
							<p>Cancel</p>
						</botton>
					</div>
				</form>
			</div>
		</section>
		<section class="fixed top-0 left-0 w-full h-full bg-black/80 flex justify-center items-center scale-0 opacity-0 z-50 transition-all duration-300 p-4" id="updated-attendance-modal">
			<div class="bg-white p-4 sm:p-6 lg:p-8 rounded-lg w-full sm:w-[90%] md:w-[80%] lg:w-[70%] xl:w-1/2 flex flex-col gap-4 sm:gap-6 max-h-[90vh] overflow-y-auto">
				<div class="flex justify-between items-center">
					<h1 id="update-attendance-heading" class="text-2xl font-bold">Add Attendance</h1>
					<div class="bg-[#141414] flex items-center justify-center p-2 text-white rounded-full cursor-pointer" id="close-update-attendance-btn">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
							<path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/>
						</svg>
					</div>
				</div>
				<div class="flex flex-col gap-2">
					<p id="update-attendance-message">Attendance details added successfully.</p>
				</div>
				<div class="flex justify-end">
					<botton id="close-update-attendance-modal" class="bg-indigo-600 text-white px-4 py-2 rounded cursor-pointer">
						<p>Close</p>
					</botton>
				</div>
			</div>
		</section>
		<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
		<script src="https://unpkg.com/gridjs/dist/gridjs.umd.js"></script>
		<script>
			// const ctx = document.getElementById('myChart');

			// new Chart(ctx, {
			// 	type: 'bar',
			// 	data: {
			// 		labels: ["January", "February", "March", "April", "March", "May", "June"],
			// 		datasets: [
			// 			{
			// 				label: "Attandance",
			// 				data: [10, 20, 50, 30, 32, 20, 25],
			// 				backgroundColor: "#E0E7FF",
			// 				borderColor: "#615FFF",
			// 				borderWidth: 1,
			// 			},
			// 		],
			// 	},
			// 	options: {
			// 		scales: {
			// 			y: {
			// 				beginAtZero: true
			// 			}
			// 		}
			// 	}
			// });

			document.getElementById("notificationBtn").addEventListener("click", function () {
				console.log("clicked");
				document.getElementById("notificationModal").classList.toggle("scale-y-0")
				document.getElementById("notificationModal").classList.toggle("opacity-0")
				document.getElementById("notificationModal").classList.toggle("scale-y-100")
				document.getElementById("notificationModal").classList.toggle("opacity-100")
			})
			
			document.getElementById("notificationModal").addEventListener("mouseleave", function () {
				setTimeout(() => {
					document.getElementById("notificationModal").classList.toggle("scale-y-0")
					document.getElementById("notificationModal").classList.toggle("opacity-0")
					document.getElementById("notificationModal").classList.toggle("scale-y-100")
					document.getElementById("notificationModal").classList.toggle("opacity-100")
				}, 1000);
			})

			document.getElementById('close-add-attendance-modal').addEventListener('click', () => {
				document.getElementById('add-attendance-modal').classList.remove('scale-100', 'opacity-100');
				document.getElementById('add-attendance-modal').classList.add('scale-0', 'opacity-0');
			});

			document.getElementById('close-attendance-modal').addEventListener('click', () => {
				document.getElementById('add-attendance-modal').classList.remove('scale-100', 'opacity-100');
				document.getElementById('add-attendance-modal').classList.add('scale-0', 'opacity-0');
			});

			document.getElementById('close-update-attendance-btn').addEventListener('click', () => {
				document.getElementById('updated-attendance-modal').classList.remove('scale-100', 'opacity-100');
				document.getElementById('updated-attendance-modal').classList.add('scale-0', 'opacity-0');
				window.location.reload()
			});

			document.getElementById('close-update-attendance-modal').addEventListener('click', () => {
				document.getElementById('updated-attendance-modal').classList.remove('scale-100', 'opacity-100');
				document.getElementById('updated-attendance-modal').classList.add('scale-0', 'opacity-0');
				window.location.reload()
			});

			document.getElementById("add-attendance-btn").addEventListener("click", function (e) {
				e.preventDefault();
				const form = document.getElementById("add-attendance-form");
				let formData = new FormData(form); // Correctly create FormData

				formData.set("studentName", document.getElementById("studentName").getAttribute("data-id"));
				formData.set("attendanceDate", document.getElementById("attendanceDate").value);

				fetch("/instructor/takeAttendance/", {
					method: "POST", // Change to PUT if updating
					body: formData
				})
				.then(response => response.json())
				.then(data => {
					console.log("Success:", data);
					if (data.success) {
						document.getElementById('add-attendance-modal').classList.remove('scale-100', 'opacity-100');
						document.getElementById('add-attendance-modal').classList.add('scale-0', 'opacity-0');
						document.getElementById("updated-attendance-modal").classList.remove('scale-0', 'opacity-0');
						document.getElementById("updated-attendance-modal").classList.add('scale-100', 'opacity-100');
						document.getElementById("update-attendance-message").innerText = "Attendance details added successfully."
						document.getElementById("update-attendance-heading").innerText = "Add Attendance"
					} else if (data.error) {
						console.error("Error:", data.error);
						document.getElementById('add-attendance-modal').classList.remove('scale-100', 'opacity-100');
						document.getElementById('add-attendance-modal').classList.add('scale-0', 'opacity-0');
						document.getElementById("updated-attendance-modal").classList.remove('scale-0', 'opacity-0');
						document.getElementById("updated-attendance-modal").classList.add('scale-100', 'opacity-100');
						document.getElementById("update-attendance-message").innerText = data.error;
						document.getElementById("update-attendance-heading").innerText = "Error"
					}
				})
				.catch(error => {
					console.error("Error:", error);
					document.getElementById('add-attendance-modal').classList.remove('scale-100', 'opacity-100');
					document.getElementById('add-attendance-modal').classList.add('scale-0', 'opacity-0');
					document.getElementById("updated-attendance-modal").classList.remove('scale-0', 'opacity-0');
					document.getElementById("updated-attendance-modal").classList.add('scale-100', 'opacity-100');
					document.getElementById("update-attendance-message").innerText = "Error adding attendance information."
					document.getElementById("update-attendance-heading").innerText = "Error"
				});
			})

			const studentGrid = new gridjs.Grid({
				search: true,
				pagination: {
					limit: 5,
					summary: false
				},
				sort: true,
				fixedHeader: true,
				columns: [
					{
						id: "id",
						name: "ID",
						width: '5%',
						formatter: (cell, row) => {
							cell = `<span class="text-indigo-600 font-semibold">${cell}</span>`;
							return gridjs.html(cell);
						},
						hidden: true
					},
					"Student Name",
					"Course",
					"Slot",
					"Phone Number",
                         {
						name: "Attendance",
						formatter: (cell, row) => {
							if (cell == true) {
								return gridjs.html(`
									<div class="p-3 bg-indigo-600 text-white rounded-lg flex items-center justify-center">
										<p>Already Taken</p>
									</div>
								`);
							}
							let attendanceBtn = gridjs.h('button', {
								className: 'p-3 bg-indigo-600 text-white rounded-lg cursor-pointer',
								innerHTML: `
									<p>Take Attendance</p>
								`,
								onClick: () => {
									fetch("/instructor/getIndexData/?studentId=" + row.cells[0].data)
										.then(response => response.json())
										.then(data => {
											document.getElementById("studentName").value = data["name"];
											document.getElementById("studentName").setAttribute("data-id", data["id"]);
											document.getElementById("studentName").setAttribute("readonly", true);
											document.getElementById("studentName").setAttribute("disabled", true);
											document.getElementById("studentName").removeAttribute("required");
											document.getElementById("studentName").classList.remove('focus:outline-2', 'focus:-outline-offset-2', 'focus:outline-indigo-600');
											document.getElementById("attendanceDate").value = new Date().toISOString().split('T')[0];
											document.getElementById("attendanceDate").setAttribute("readonly", true);
											document.getElementById("attendanceDate").setAttribute("disabled", true);
											document.getElementById("attendanceDate").removeAttribute("required");
											document.getElementById("attendanceDate").classList.remove('focus:outline-2', 'focus:-outline-offset-2', 'focus:outline-indigo-600');
											document.getElementById("inTime").value = data["slot"].split('-')[0];
											document.getElementById("outTime").value = data["slot"].split('-')[1];
										});
									document.getElementById('add-attendance-modal').classList.remove('scale-0', 'opacity-0');
									document.getElementById('add-attendance-modal').classList.add('scale-100', 'opacity-100');
								}
							}, '');
							// let deleteBtn = gridjs.h('button', {
							// 	className: 'p-3 bg-red-600 text-white rounded-lg cursor-pointer',
							// 	innerHTML: `
							// 		<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
							// 			<path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"/>
							// 			<path d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"/>
							// 		</svg>
							// 	`,
							// 	onClick: () => {
							// 		instructorId = row.cells[0].data;
							// 		document.getElementById("delete-instructor-btn").setAttribute("data-id", instructorId);
							// 		document.getElementById("delete-instructor-message").innerHTML = `Are you sure you want to delete <b>${row.cells[2].data}</b>'s details?`;
							// 		document.getElementById('delete-instructor-modal').classList.remove('scale-0', 'opacity-0');
							// 		document.getElementById('delete-instructor-modal').classList.add('scale-100', 'opacity-100');
							// 	}
							// }, '');
							return gridjs.h('div', {
								className: 'flex gap-4'
							}, attendanceBtn);
							// return gridjs.h('div', {
							// 	className: 'flex gap-4'
							// }, editBtn, deleteBtn);
						},
						width: '17%'
					}
				],
				server: {
					url: '/instructor/getIndexData/',
					then: data => data.map(student => [student.id, student.name, student.cource, student.slot, student.phone, student.attendanceTaken])
				},
				className: {
					th: '!bg-black !text-white',
					sort: '!bg-black !text-white',
					search: '!float-right !w-[25%]',
				}
			})

               const paymentGrid = new gridjs.Grid({
				search: true,
				pagination: {
					limit: 5,
					summary: false
				},
				sort: true,
				fixedHeader: true,
				columns: [
                         {
						id: "id",
						name: "ID",
						width: '5%',
						formatter: (cell, row) => {
							cell = `<span class="text-indigo-600 font-semibold">${cell}</span>`;
							return gridjs.html(cell);
						},
						hidden: true
					},
					"Student Name",
					"Course",
					"Phone",
					"Amount Paid",
					"Amount Pending",
					"Due Date",
				],
				server: {
					url: '/instructor/getReamainingPaymentData/',
					then: data => data.map(payment => [payment.id, payment.name, payment.cource, payment.phone, payment.paid, payment.pending, payment.dueDate])
				},
				className: {
					th: '!bg-black !text-white',
					sort: '!bg-black !text-white',
					search: '!float-right !w-[25%]',
				}
			})

			studentGrid.render(document.getElementById("student-table"))
			paymentGrid.render(document.getElementById("payment-table"))
		</script>
          <script>
               document.addEventListener('DOMContentLoaded', function() {
                    const links = [...document.querySelectorAll('a')];
          
                    links.forEach(link => {
                         if (link.href === window.location.href) {
                              link.querySelector('div').classList.add('bg-indigo-500', 'bg-opacity-80', 'text-white');
                         }
                    });

					// Mobile menu functionality
					const mobileMenuBtn = document.getElementById('mobile-menu-btn-ins');
					const closeMenuBtn = document.getElementById('close-menu-btn-ins');
					const sidebar = document.getElementById('sidebar-ins');
					const overlay = document.getElementById('mobile-overlay-ins');

					function openMenu() {
						sidebar.classList.remove('-translate-x-full');
						overlay.classList.remove('hidden');
					}

					function closeMenu() {
						sidebar.classList.add('-translate-x-full');
						overlay.classList.add('hidden');
					}

					if (mobileMenuBtn) {
						mobileMenuBtn.addEventListener('click', openMenu);
					}
					
					if (closeMenuBtn) {
						closeMenuBtn.addEventListener('click', closeMenu);
					}
					
					if (overlay) {
						overlay.addEventListener('click', closeMenu);
					}

					// Close menu when clicking on a link (mobile)
					const sidebarLinks = sidebar.querySelectorAll('a');
					sidebarLinks.forEach(link => {
						link.addEventListener('click', () => {
							if (window.innerWidth < 1024) {
								closeMenu();
							}
						});
					});
               });
          </script>
	</section>
</body>

</html>